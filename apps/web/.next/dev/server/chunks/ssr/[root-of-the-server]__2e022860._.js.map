{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/lib/api-client.ts"],"sourcesContent":["import type { ApiError, ApiErrorResponse, ApiResponse } from \"@/types/notion\";\r\n\r\nexport class ApiClientError extends Error {\r\n  public code: ApiError[\"code\"];\r\n  public retryable: boolean;\r\n\r\n  constructor(apiError: ApiError) {\r\n    super(apiError.message);\r\n    this.name = \"ApiClientError\";\r\n    this.code = apiError.code;\r\n    this.retryable = apiError.retryable;\r\n  }\r\n}\r\n\r\nasync function request<T>(\r\n  url: string,\r\n  options: RequestInit = {}\r\n): Promise<T> {\r\n  const res = await fetch(url, {\r\n    ...options,\r\n    credentials: \"include\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...options.headers,\r\n    },\r\n  });\r\n\r\n  // Handle non-JSON responses\r\n  const contentType = res.headers.get(\"content-type\");\r\n  if (!contentType?.includes(\"application/json\")) {\r\n    if (!res.ok) {\r\n      throw new ApiClientError({\r\n        code: \"internal_error\",\r\n        message: `Request failed with status ${res.status}`,\r\n        retryable: res.status >= 500,\r\n      });\r\n    }\r\n    return {} as T;\r\n  }\r\n\r\n  const body: ApiResponse<T> = await res.json();\r\n\r\n  if (\"error\" in body) {\r\n    throw new ApiClientError((body as ApiErrorResponse).error);\r\n  }\r\n\r\n  return (body as { data: T }).data;\r\n}\r\n\r\nexport const apiClient = {\r\n  get<T>(url: string): Promise<T> {\r\n    return request<T>(url, { method: \"GET\" });\r\n  },\r\n\r\n  post<T>(url: string, data?: unknown): Promise<T> {\r\n    return request<T>(url, {\r\n      method: \"POST\",\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  },\r\n};\r\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,uBAAuB;IAC3B,KAAuB;IACvB,UAAmB;IAE1B,YAAY,QAAkB,CAAE;QAC9B,KAAK,CAAC,SAAS,OAAO;QACtB,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,IAAI,GAAG,SAAS,IAAI;QACzB,IAAI,CAAC,SAAS,GAAG,SAAS,SAAS;IACrC;AACF;AAEA,eAAe,QACb,GAAW,EACX,UAAuB,CAAC,CAAC;IAEzB,MAAM,MAAM,MAAM,MAAM,KAAK;QAC3B,GAAG,OAAO;QACV,aAAa;QACb,SAAS;YACP,gBAAgB;YAChB,GAAG,QAAQ,OAAO;QACpB;IACF;IAEA,4BAA4B;IAC5B,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC;IACpC,IAAI,CAAC,aAAa,SAAS,qBAAqB;QAC9C,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,IAAI,eAAe;gBACvB,MAAM;gBACN,SAAS,CAAC,2BAA2B,EAAE,IAAI,MAAM,EAAE;gBACnD,WAAW,IAAI,MAAM,IAAI;YAC3B;QACF;QACA,OAAO,CAAC;IACV;IAEA,MAAM,OAAuB,MAAM,IAAI,IAAI;IAE3C,IAAI,WAAW,MAAM;QACnB,MAAM,IAAI,eAAe,AAAC,KAA0B,KAAK;IAC3D;IAEA,OAAO,AAAC,KAAqB,IAAI;AACnC;AAEO,MAAM,YAAY;IACvB,KAAO,GAAW;QAChB,OAAO,QAAW,KAAK;YAAE,QAAQ;QAAM;IACzC;IAEA,MAAQ,GAAW,EAAE,IAAc;QACjC,OAAO,QAAW,KAAK;YACrB,QAAQ;YACR,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;QACtC;IACF;AACF"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/hooks/useNotionConnection.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { apiClient, ApiClientError } from \"@/lib/api-client\";\r\nimport type { ConnectionState, NotionConnectionStatus } from \"@/types/notion\";\r\n\r\ninterface UseNotionConnectionReturn {\r\n  state: ConnectionState;\r\n  workspaceName: string | null;\r\n  connectedAt: string | null;\r\n  error: string | null;\r\n  refetch: () => Promise<void>;\r\n}\r\n\r\nexport function useNotionConnection(): UseNotionConnectionReturn {\r\n  const [state, setState] = useState<ConnectionState>(\"loading\");\r\n  const [workspaceName, setWorkspaceName] = useState<string | null>(null);\r\n  const [connectedAt, setConnectedAt] = useState<string | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchStatus = useCallback(async () => {\r\n    if (!mountedRef.current) return;\r\n    setState(\"loading\");\r\n    setError(null);\r\n\r\n    try {\r\n      const status = await apiClient.get<NotionConnectionStatus>(\"/notion/status\");\r\n\r\n      if (!mountedRef.current) return;\r\n\r\n      if (status.connected && status.status === \"active\") {\r\n        setState(\"connected\");\r\n        setWorkspaceName(status.workspace_name ?? null);\r\n        setConnectedAt(status.connected_at ?? null);\r\n      } else {\r\n        setState(\"not_connected\");\r\n        setWorkspaceName(null);\r\n        setConnectedAt(null);\r\n      }\r\n    } catch (err) {\r\n      if (!mountedRef.current) return;\r\n\r\n      if (err instanceof ApiClientError) {\r\n        if (err.code === \"reconnection_required\") {\r\n          setState(\"reconnection_required\");\r\n        } else {\r\n          setState(\"error\");\r\n        }\r\n        setError(err.message);\r\n      } else {\r\n        setState(\"error\");\r\n        setError(\"Failed to check connection status\");\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n    fetchStatus();\r\n    return () => {\r\n      mountedRef.current = false;\r\n    };\r\n  }, [fetchStatus]);\r\n\r\n  return { state, workspaceName, connectedAt, error, refetch: fetchStatus };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAcO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAkB;IACpD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB;IAClE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;IAC9D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,aAAa,IAAA,+MAAM,EAAC;IAE1B,MAAM,cAAc,IAAA,oNAAW,EAAC;QAC9B,IAAI,CAAC,WAAW,OAAO,EAAE;QACzB,SAAS;QACT,SAAS;QAET,IAAI;YACF,MAAM,SAAS,MAAM,gJAAS,CAAC,GAAG,CAAyB;YAE3D,IAAI,CAAC,WAAW,OAAO,EAAE;YAEzB,IAAI,OAAO,SAAS,IAAI,OAAO,MAAM,KAAK,UAAU;gBAClD,SAAS;gBACT,iBAAiB,OAAO,cAAc,IAAI;gBAC1C,eAAe,OAAO,YAAY,IAAI;YACxC,OAAO;gBACL,SAAS;gBACT,iBAAiB;gBACjB,eAAe;YACjB;QACF,EAAE,OAAO,KAAK;YACZ,IAAI,CAAC,WAAW,OAAO,EAAE;YAEzB,IAAI,eAAe,qJAAc,EAAE;gBACjC,IAAI,IAAI,IAAI,KAAK,yBAAyB;oBACxC,SAAS;gBACX,OAAO;oBACL,SAAS;gBACX;gBACA,SAAS,IAAI,OAAO;YACtB,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,WAAW,OAAO,GAAG;QACrB;QACA,OAAO;YACL,WAAW,OAAO,GAAG;QACvB;IACF,GAAG;QAAC;KAAY;IAEhB,OAAO;QAAE;QAAO;QAAe;QAAa;QAAO,SAAS;IAAY;AAC1E"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/notion/ConnectionStatus.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo } from \"react\";\r\nimport type { ConnectionState } from \"@/types/notion\";\r\n\r\ninterface ConnectionStatusProps {\r\n  state: ConnectionState;\r\n  workspaceName: string | null;\r\n  connectedAt: string | null;\r\n}\r\n\r\nfunction ConnectionStatusComponent({\r\n  state,\r\n  workspaceName,\r\n  connectedAt,\r\n}: ConnectionStatusProps) {\r\n  if (state === \"loading\") {\r\n    return (\r\n      <div className=\"flex items-center gap-3 px-4 py-3 bg-neutral-900 rounded-xl border border-neutral-800 animate-pulse\">\r\n        <div className=\"h-2.5 w-2.5 rounded-full bg-neutral-700\" />\r\n        <div className=\"h-4 w-32 bg-neutral-800 rounded\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const statusConfig: Record<\r\n    Exclude<ConnectionState, \"loading\">,\r\n    { dot: string; label: string; sub?: string }\r\n  > = {\r\n    connected: {\r\n      dot: \"bg-white\",\r\n      label: workspaceName ?? \"Notion Connected\",\r\n      sub: connectedAt\r\n        ? `Connected ${new Date(connectedAt).toLocaleDateString()}`\r\n        : undefined,\r\n    },\r\n    not_connected: {\r\n      dot: \"bg-neutral-600\",\r\n      label: \"Not connected\",\r\n      sub: \"Connect your Notion workspace to get started\",\r\n    },\r\n    error: {\r\n      dot: \"bg-neutral-500\",\r\n      label: \"Connection error\",\r\n      sub: \"Something went wrong with the connection\",\r\n    },\r\n    reconnection_required: {\r\n      dot: \"bg-neutral-400 animate-pulse\",\r\n      label: \"Reconnection needed\",\r\n      sub: \"Your Notion connection has expired\",\r\n    },\r\n  };\r\n\r\n  const config = statusConfig[state];\r\n\r\n  return (\r\n    <div className=\"flex items-center gap-3 px-4 py-3 bg-neutral-900 rounded-xl border border-neutral-800\">\r\n      <div className={`h-2.5 w-2.5 rounded-full shrink-0 ${config.dot}`} />\r\n      <div className=\"min-w-0\">\r\n        <p className=\"text-sm font-medium text-white truncate\">\r\n          {config.label}\r\n        </p>\r\n        {config.sub && (\r\n          <p className=\"text-xs text-neutral-500 truncate\">{config.sub}</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const ConnectionStatus = memo(ConnectionStatusComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAWA,SAAS,0BAA0B,EACjC,KAAK,EACL,aAAa,EACb,WAAW,EACW;IACtB,IAAI,UAAU,WAAW;QACvB,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;;;;;8BACf,8OAAC;oBAAI,WAAU;;;;;;;;;;;;IAGrB;IAEA,MAAM,eAGF;QACF,WAAW;YACT,KAAK;YACL,OAAO,iBAAiB;YACxB,KAAK,cACD,CAAC,UAAU,EAAE,IAAI,KAAK,aAAa,kBAAkB,IAAI,GACzD;QACN;QACA,eAAe;YACb,KAAK;YACL,OAAO;YACP,KAAK;QACP;QACA,OAAO;YACL,KAAK;YACL,OAAO;YACP,KAAK;QACP;QACA,uBAAuB;YACrB,KAAK;YACL,OAAO;YACP,KAAK;QACP;IACF;IAEA,MAAM,SAAS,YAAY,CAAC,MAAM;IAElC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAW,CAAC,kCAAkC,EAAE,OAAO,GAAG,EAAE;;;;;;0BACjE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAE,WAAU;kCACV,OAAO,KAAK;;;;;;oBAEd,OAAO,GAAG,kBACT,8OAAC;wBAAE,WAAU;kCAAqC,OAAO,GAAG;;;;;;;;;;;;;;;;;;AAKtE;AAEO,MAAM,iCAAmB,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/ui/LoadingSpinner.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo } from \"react\";\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  label?: string;\r\n}\r\n\r\nfunction LoadingSpinnerComponent({ size = \"md\", label }: LoadingSpinnerProps) {\r\n  const sizeMap = {\r\n    sm: \"h-4 w-4 border-[2px]\",\r\n    md: \"h-6 w-6 border-[2px]\",\r\n    lg: \"h-10 w-10 border-[3px]\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center gap-3\">\r\n      <div\r\n        className={`${sizeMap[size]} rounded-full border-white/20 border-t-white animate-spin`}\r\n        role=\"status\"\r\n        aria-label={label ?? \"Loading\"}\r\n      />\r\n      {label && (\r\n        <p className=\"text-sm text-neutral-400 animate-pulse\">{label}</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const LoadingSpinner = memo(LoadingSpinnerComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASA,SAAS,wBAAwB,EAAE,OAAO,IAAI,EAAE,KAAK,EAAuB;IAC1E,MAAM,UAAU;QACd,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC,yDAAyD,CAAC;gBACtF,MAAK;gBACL,cAAY,SAAS;;;;;;YAEtB,uBACC,8OAAC;gBAAE,WAAU;0BAA0C;;;;;;;;;;;;AAI/D;AAEO,MAAM,+BAAiB,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 307, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/notion/ConnectButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo, useCallback, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { apiClient, ApiClientError } from \"@/lib/api-client\";\r\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\r\nimport type { ConnectResponse } from \"@/types/notion\";\r\n\r\ninterface ConnectButtonProps {\r\n  className?: string;\r\n  variant?: \"primary\" | \"compact\" | \"card\";\r\n}\r\n\r\nfunction ConnectButtonComponent({\r\n  className = \"\",\r\n  variant = \"primary\",\r\n}: ConnectButtonProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleConnect = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const { url } = await apiClient.post<ConnectResponse>(\r\n        \"/auth/notion/connect\"\r\n      );\r\n      // Full-page redirect to Notion OAuth\r\n      window.location.href = url;\r\n    } catch (err) {\r\n      setLoading(false);\r\n      if (err instanceof ApiClientError) {\r\n        setError(err.message);\r\n      } else {\r\n        setError(\"Failed to initiate connection\");\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  if (variant === \"compact\") {\r\n    return (\r\n      <button\r\n        onClick={handleConnect}\r\n        disabled={loading}\r\n        className={`inline-flex items-center gap-2 bg-white text-black font-medium text-sm px-4 py-2 rounded-lg hover:bg-neutral-200 transition-colors disabled:opacity-50 ${className}`}\r\n      >\r\n        {loading ? (\r\n          <LoadingSpinner size=\"sm\" />\r\n        ) : (\r\n          <Image src=\"/notion.png\" alt=\"\" width={16} height={16} />\r\n        )}\r\n        <span>Connect</span>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  if (variant === \"card\") {\r\n    return (\r\n      <div className={`flex flex-col gap-3 ${className}`}>\r\n        <button\r\n          onClick={handleConnect}\r\n          disabled={loading}\r\n          className=\"w-full rounded-2xl bg-white text-black font-bold text-base py-5 hover:bg-neutral-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {loading ? \"Connecting...\" : \"Connect Notion\"}\r\n        </button>\r\n        {error && (\r\n          <p className=\"text-sm text-neutral-400 text-center\">{error}</p>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`flex flex-col items-center gap-4 ${className}`}>\r\n      <button\r\n        onClick={handleConnect}\r\n        disabled={loading}\r\n        className=\"group relative flex items-center gap-3 bg-white text-black font-semibold text-base px-8 py-4 rounded-2xl hover:bg-neutral-100 active:scale-[0.98] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-white/5\"\r\n      >\r\n        {loading ? (\r\n          <>\r\n            <div className=\"h-5 w-5 rounded-full border-2 border-black/20 border-t-black animate-spin\" />\r\n            <span>Connecting‚Ä¶</span>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Image\r\n              src=\"/notion.png\"\r\n              alt=\"Notion\"\r\n              width={20}\r\n              height={20}\r\n              className=\"group-hover:scale-110 transition-transform\"\r\n            />\r\n            <span>Connect Notion</span>\r\n          </>\r\n        )}\r\n      </button>\r\n\r\n      {error && (\r\n        <p className=\"text-sm text-neutral-400 text-center max-w-xs\">\r\n          {error}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const ConnectButton = memo(ConnectButtonComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAaA,SAAS,uBAAuB,EAC9B,YAAY,EAAE,EACd,UAAU,SAAS,EACA;IACnB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,gJAAS,CAAC,IAAI,CAClC;YAEF,qCAAqC;YACrC,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,EAAE,OAAO,KAAK;YACZ,WAAW;YACX,IAAI,eAAe,qJAAc,EAAE;gBACjC,SAAS,IAAI,OAAO;YACtB,OAAO;gBACL,SAAS;YACX;QACF;IACF,GAAG,EAAE;IAEL,IAAI,YAAY,WAAW;QACzB,qBACE,8OAAC;YACC,SAAS;YACT,UAAU;YACV,WAAW,CAAC,uJAAuJ,EAAE,WAAW;;gBAE/K,wBACC,8OAAC,oKAAc;oBAAC,MAAK;;;;;yCAErB,8OAAC,wIAAK;oBAAC,KAAI;oBAAc,KAAI;oBAAG,OAAO;oBAAI,QAAQ;;;;;;8BAErD,8OAAC;8BAAK;;;;;;;;;;;;IAGZ;IAEA,IAAI,YAAY,QAAQ;QACtB,qBACE,8OAAC;YAAI,WAAW,CAAC,oBAAoB,EAAE,WAAW;;8BAChD,8OAAC;oBACC,SAAS;oBACT,UAAU;oBACV,WAAU;8BAET,UAAU,kBAAkB;;;;;;gBAE9B,uBACC,8OAAC;oBAAE,WAAU;8BAAwC;;;;;;;;;;;;IAI7D;IAEA,qBACE,8OAAC;QAAI,WAAW,CAAC,iCAAiC,EAAE,WAAW;;0BAC7D,8OAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;0BAET,wBACC;;sCACE,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;sCAAK;;;;;;;iDAGR;;sCACE,8OAAC,wIAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,WAAU;;;;;;sCAEZ,8OAAC;sCAAK;;;;;;;;;;;;;YAKX,uBACC,8OAAC;gBAAE,WAAU;0BACV;;;;;;;;;;;;AAKX;AAEO,MAAM,8BAAgB,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 477, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/notion/DisconnectButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo, useCallback, useState } from \"react\";\r\nimport { apiClient, ApiClientError } from \"@/lib/api-client\";\r\nimport type { DisconnectResponse } from \"@/types/notion\";\r\n\r\ninterface DisconnectButtonProps {\r\n  onDisconnected?: () => void;\r\n}\r\n\r\nfunction DisconnectButtonComponent({ onDisconnected }: DisconnectButtonProps) {\r\n  const [confirming, setConfirming] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleDisconnect = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await apiClient.post<DisconnectResponse>(\"/notion/disconnect\");\r\n      onDisconnected?.();\r\n    } catch (err) {\r\n      if (err instanceof ApiClientError) {\r\n        setError(err.message);\r\n      } else {\r\n        setError(\"Failed to disconnect\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n      setConfirming(false);\r\n    }\r\n  }, [onDisconnected]);\r\n\r\n  if (!confirming) {\r\n    return (\r\n      <button\r\n        onClick={() => setConfirming(true)}\r\n        className=\"text-xs text-neutral-500 hover:text-neutral-300 transition-colors underline underline-offset-2\"\r\n      >\r\n        Disconnect Notion\r\n      </button>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex flex-col gap-2 p-4 bg-neutral-900 border border-neutral-800 rounded-xl\">\r\n      <p className=\"text-sm text-neutral-300\">\r\n        This will remove access to your Notion workspace. You can reconnect\r\n        anytime.\r\n      </p>\r\n      {error && <p className=\"text-xs text-neutral-500\">{error}</p>}\r\n      <div className=\"flex gap-2\">\r\n        <button\r\n          onClick={handleDisconnect}\r\n          disabled={loading}\r\n          className=\"text-sm font-medium bg-white text-black px-4 py-2 rounded-lg hover:bg-neutral-200 transition-colors disabled:opacity-50\"\r\n        >\r\n          {loading ? \"Disconnecting‚Ä¶\" : \"Confirm\"}\r\n        </button>\r\n        <button\r\n          onClick={() => setConfirming(false)}\r\n          disabled={loading}\r\n          className=\"text-sm text-neutral-400 hover:text-white px-4 py-2 rounded-lg transition-colors\"\r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const DisconnectButton = memo(DisconnectButtonComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUA,SAAS,0BAA0B,EAAE,cAAc,EAAyB;IAC1E,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,mBAAmB,IAAA,oNAAW,EAAC;QACnC,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,gJAAS,CAAC,IAAI,CAAqB;YACzC;QACF,EAAE,OAAO,KAAK;YACZ,IAAI,eAAe,qJAAc,EAAE;gBACjC,SAAS,IAAI,OAAO;YACtB,OAAO;gBACL,SAAS;YACX;QACF,SAAU;YACR,WAAW;YACX,cAAc;QAChB;IACF,GAAG;QAAC;KAAe;IAEnB,IAAI,CAAC,YAAY;QACf,qBACE,8OAAC;YACC,SAAS,IAAM,cAAc;YAC7B,WAAU;sBACX;;;;;;IAIL;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAE,WAAU;0BAA2B;;;;;;YAIvC,uBAAS,8OAAC;gBAAE,WAAU;0BAA4B;;;;;;0BACnD,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS;wBACT,UAAU;wBACV,WAAU;kCAET,UAAU,mBAAmB;;;;;;kCAEhC,8OAAC;wBACC,SAAS,IAAM,cAAc;wBAC7B,UAAU;wBACV,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;AAEO,MAAM,iCAAmB,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 582, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/hooks/useNotionData.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useRef, useState } from \"react\";\r\nimport { apiClient, ApiClientError } from \"@/lib/api-client\";\nimport type {\n  ApiError,\n  NotionQueryPayload,\n  NotionQueryResult,\n} from \"@/types/notion\";\n\r\ninterface UseNotionDataReturn {\r\n  data: NotionQueryResult | null;\r\n  loading: boolean;\r\n  error: ApiError | null;\r\n  query: (payload: NotionQueryPayload) => Promise<void>;\r\n  reset: () => void;\r\n}\r\n\r\nexport function useNotionData(): UseNotionDataReturn {\r\n  const [data, setData] = useState<NotionQueryResult | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<ApiError | null>(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const query = useCallback(async (payload: NotionQueryPayload) => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const result = await apiClient.post<NotionQueryResult>(\r\n        \"/notion/query\",\r\n        payload\r\n      );\r\n      if (mountedRef.current) {\r\n        setData(result);\r\n      }\r\n    } catch (err) {\r\n      if (!mountedRef.current) return;\r\n\r\n      if (err instanceof ApiClientError) {\r\n        setError({\r\n          code: err.code,\r\n          message: err.message,\r\n          retryable: err.retryable,\r\n        });\r\n      } else {\r\n        setError({\r\n          code: \"internal_error\",\r\n          message: \"An unexpected error occurred\",\r\n          retryable: true,\r\n        });\r\n      }\r\n    } finally {\r\n      if (mountedRef.current) {\r\n        setLoading(false);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const reset = useCallback(() => {\r\n    setData(null);\r\n    setError(null);\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  return { data, loading, error, query, reset };\r\n}\n\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAkBO,SAAS;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAA2B;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAkB;IACpD,MAAM,aAAa,IAAA,+MAAM,EAAC;IAE1B,MAAM,QAAQ,IAAA,oNAAW,EAAC,OAAO;QAC/B,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,SAAS,MAAM,gJAAS,CAAC,IAAI,CACjC,iBACA;YAEF,IAAI,WAAW,OAAO,EAAE;gBACtB,QAAQ;YACV;QACF,EAAE,OAAO,KAAK;YACZ,IAAI,CAAC,WAAW,OAAO,EAAE;YAEzB,IAAI,eAAe,qJAAc,EAAE;gBACjC,SAAS;oBACP,MAAM,IAAI,IAAI;oBACd,SAAS,IAAI,OAAO;oBACpB,WAAW,IAAI,SAAS;gBAC1B;YACF,OAAO;gBACL,SAAS;oBACP,MAAM;oBACN,SAAS;oBACT,WAAW;gBACb;YACF;QACF,SAAU;YACR,IAAI,WAAW,OAAO,EAAE;gBACtB,WAAW;YACb;QACF;IACF,GAAG,EAAE;IAEL,MAAM,QAAQ,IAAA,oNAAW,EAAC;QACxB,QAAQ;QACR,SAAS;QACT,WAAW;IACb,GAAG,EAAE;IAEL,OAAO;QAAE;QAAM;QAAS;QAAO;QAAO;IAAM;AAC9C"}},
    {"offset": {"line": 642, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/ui/ErrorBanner.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo, useCallback, useState } from \"react\";\r\nimport type { ErrorCode } from \"@/types/notion\";\r\n\r\ninterface ErrorBannerProps {\r\n  code: ErrorCode;\r\n  message: string;\r\n  retryable?: boolean;\r\n  onRetry?: () => void;\r\n  onDismiss?: () => void;\r\n}\r\n\r\nconst ERROR_CONFIG: Record<ErrorCode, { bg: string; icon: string }> = {\r\n  reconnection_required: { bg: \"bg-neutral-800 border-neutral-600\", icon: \"‚ö†\" },\r\n  notion_unavailable: { bg: \"bg-neutral-900 border-neutral-700\", icon: \"‚óå\" },\r\n  rate_limited: { bg: \"bg-neutral-900 border-neutral-700\", icon: \"‚ó∑\" },\r\n  internal_error: { bg: \"bg-neutral-900 border-neutral-600\", icon: \"‚úï\" },\r\n};\r\n\r\nfunction ErrorBannerComponent({\r\n  code,\r\n  message,\r\n  retryable,\r\n  onRetry,\r\n  onDismiss,\r\n}: ErrorBannerProps) {\r\n  const [dismissed, setDismissed] = useState(false);\r\n\r\n  const handleDismiss = useCallback(() => {\r\n    setDismissed(true);\r\n    onDismiss?.();\r\n  }, [onDismiss]);\r\n\r\n  if (dismissed) return null;\r\n\r\n  const config = ERROR_CONFIG[code] ?? ERROR_CONFIG.internal_error;\r\n\r\n  return (\r\n    <div\r\n      className={`${config.bg} border rounded-xl px-4 py-3 flex items-center justify-between gap-3 transition-all duration-300`}\r\n      role=\"alert\"\r\n    >\r\n      <div className=\"flex items-center gap-3 min-w-0\">\r\n        <span className=\"text-lg shrink-0\">{config.icon}</span>\r\n        <p className=\"text-sm text-neutral-300 truncate\">{message}</p>\r\n      </div>\r\n      <div className=\"flex items-center gap-2 shrink-0\">\r\n        {retryable && onRetry && (\r\n          <button\r\n            onClick={onRetry}\r\n            className=\"text-xs font-medium text-white bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-lg transition-colors\"\r\n          >\r\n            Retry\r\n          </button>\r\n        )}\r\n        <button\r\n          onClick={handleDismiss}\r\n          className=\"text-neutral-500 hover:text-neutral-300 transition-colors p-1\"\r\n          aria-label=\"Dismiss\"\r\n        >\r\n          ‚úï\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const ErrorBanner = memo(ErrorBannerComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAaA,MAAM,eAAgE;IACpE,uBAAuB;QAAE,IAAI;QAAqC,MAAM;IAAI;IAC5E,oBAAoB;QAAE,IAAI;QAAqC,MAAM;IAAI;IACzE,cAAc;QAAE,IAAI;QAAqC,MAAM;IAAI;IACnE,gBAAgB;QAAE,IAAI;QAAqC,MAAM;IAAI;AACvE;AAEA,SAAS,qBAAqB,EAC5B,IAAI,EACJ,OAAO,EACP,SAAS,EACT,OAAO,EACP,SAAS,EACQ;IACjB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,aAAa;QACb;IACF,GAAG;QAAC;KAAU;IAEd,IAAI,WAAW,OAAO;IAEtB,MAAM,SAAS,YAAY,CAAC,KAAK,IAAI,aAAa,cAAc;IAEhE,qBACE,8OAAC;QACC,WAAW,GAAG,OAAO,EAAE,CAAC,gGAAgG,CAAC;QACzH,MAAK;;0BAEL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAoB,OAAO,IAAI;;;;;;kCAC/C,8OAAC;wBAAE,WAAU;kCAAqC;;;;;;;;;;;;0BAEpD,8OAAC;gBAAI,WAAU;;oBACZ,aAAa,yBACZ,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;kCAIH,8OAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCACZ;;;;;;;;;;;;;;;;;;AAMT;AAEO,MAAM,4BAAc,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 748, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/notion/NotionDataView.tsx"],"sourcesContent":["\"use client\";\n\nimport { memo, useCallback, useState } from \"react\";\nimport { useNotionData } from \"@/hooks/useNotionData\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\nimport { ErrorBanner } from \"@/components/ui/ErrorBanner\";\nimport type { NotionAction, NotionPage, NotionDatabase } from \"@/types/notion\";\n\nfunction NotionDataViewComponent() {\n  const { data, loading, error, query, reset } = useNotionData();\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [activeAction, setActiveAction] = useState<NotionAction | null>(null);\n\n  const handleSearch = useCallback(async () => {\n    if (!searchInput.trim()) return;\n    setActiveAction(\"search_pages\");\n    await query({ action: \"search_pages\", params: { query: searchInput } });\n  }, [searchInput, query]);\n\n  const handleListPages = useCallback(async () => {\n    setActiveAction(\"list_pages\");\n    await query({ action: \"list_pages\" });\n  }, [query]);\n\n  const handleListDatabases = useCallback(async () => {\n    setActiveAction(\"list_databases\");\n    await query({ action: \"list_databases\" });\n  }, [query]);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      if (e.key === \"Enter\") handleSearch();\n    },\n    [handleSearch]\n  );\n  const pages: NotionPage[] = Array.isArray(data?.pages) ? data.pages : [];\n  const databases: NotionDatabase[] = Array.isArray(data?.databases)\n    ? data.databases\n    : [];\n\n  return (\n    <div className=\"flex flex-col gap-6\">\n      {/* Search Bar */}\n      <div className=\"flex gap-2\">\n        <input\n          type=\"text\"\n          value={searchInput}\n          onChange={(e) => setSearchInput(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder=\"Search your Notion pages‚Ä¶\"\n          className=\"flex-1 bg-neutral-900 border border-neutral-800 rounded-xl px-4 py-3 text-sm text-white placeholder:text-neutral-600 outline-none focus:border-neutral-600 transition-colors\"\n        />\n        <button\n          onClick={handleSearch}\n          disabled={loading || !searchInput.trim()}\n          className=\"bg-white text-black font-medium text-sm px-5 py-3 rounded-xl hover:bg-neutral-200 transition-colors disabled:opacity-40 disabled:cursor-not-allowed shrink-0\"\n        >\n          Search\n        </button>\n      </div>\n\n      {/* Quick Actions */}\n      <div className=\"flex gap-2\">\n        <button\n          onClick={handleListPages}\n          disabled={loading}\n          className={`text-xs px-3 py-1.5 rounded-lg border transition-colors ${\n            activeAction === \"list_pages\"\n              ? \"bg-white text-black border-white\"\n              : \"border-neutral-800 text-neutral-400 hover:border-neutral-600 hover:text-white\"\n          } disabled:opacity-40`}\n        >\n          Pages\n        </button>\n        <button\n          onClick={handleListDatabases}\n          disabled={loading}\n          className={`text-xs px-3 py-1.5 rounded-lg border transition-colors ${\n            activeAction === \"list_databases\"\n              ? \"bg-white text-black border-white\"\n              : \"border-neutral-800 text-neutral-400 hover:border-neutral-600 hover:text-white\"\n          } disabled:opacity-40`}\n        >\n          Databases\n        </button>\n        {data && (\n          <button\n            onClick={reset}\n            className=\"text-xs px-3 py-1.5 rounded-lg text-neutral-600 hover:text-neutral-400 transition-colors ml-auto\"\n          >\n            Clear\n          </button>\n        )}\n      </div>\n\n      {/* Error */}\n      {error && (\n        <ErrorBanner\n          code={error.code}\n          message={error.message}\n          retryable={error.retryable}\n          onRetry={\n            activeAction\n              ? () =>\n                  query({\n                    action: activeAction,\n                    params:\n                      activeAction === \"search_pages\"\n                        ? { query: searchInput }\n                        : undefined,\n                  })\n              : undefined\n          }\n        />\n      )}\n\n      {/* Loading */}\n      {loading && (\n        <div className=\"py-12\">\n          <LoadingSpinner size=\"md\" label=\"Fetching from Notion‚Ä¶\" />\n        </div>\n      )}\n\n      {/* Results */}\n      {!loading && data && (\n        <div className=\"flex flex-col gap-3\">\n          {/* Pages */}\n          {pages.length > 0 ? (\n            <div className=\"flex flex-col gap-2\">\n              <h3 className=\"text-xs font-medium text-neutral-500 uppercase tracking-wider\">\n                Pages\n              </h3>\n              {pages.map((page: NotionPage) => (\n                <a\n                  key={page.id}\n                  href={page.url ?? \"#\"}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"group flex items-center gap-3 p-3 bg-neutral-900 border border-neutral-800 rounded-xl hover:border-neutral-700 transition-colors\"\n                >\n                  <span className=\"text-lg shrink-0\">\n                    {page.icon ?? \"üìÑ\"}\n                  </span>\n                  <div className=\"min-w-0 flex-1\">\n                    <p className=\"text-sm font-medium text-white truncate group-hover:text-neutral-200\">\n                      {page.title || \"Untitled\"}\n                    </p>\n                    {page.last_edited && (\n                      <p className=\"text-xs text-neutral-600\">\n                        Edited{\" \"}\n                        {new Date(page.last_edited).toLocaleDateString()}\n                      </p>\n                    )}\n                  </div>\n                  <span className=\"text-neutral-700 group-hover:text-neutral-500 transition-colors text-xs\">\n                    ‚Üó\n                  </span>\n                </a>\n              ))}\n            </div>\n          ) : null}\n\n          {/* Databases */}\n          {databases.length > 0 ? (\n            <div className=\"flex flex-col gap-2\">\n              <h3 className=\"text-xs font-medium text-neutral-500 uppercase tracking-wider\">\n                Databases\n              </h3>\n              {databases.map((db: NotionDatabase) => (\n                <a\n                  key={db.id}\n                  href={db.url ?? \"#\"}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"group flex items-center gap-3 p-3 bg-neutral-900 border border-neutral-800 rounded-xl hover:border-neutral-700 transition-colors\"\n                >\n                  <span className=\"text-lg shrink-0\">{db.icon ?? \"üóÉÔ∏è\"}</span>\n                  <div className=\"min-w-0 flex-1\">\n                    <p className=\"text-sm font-medium text-white truncate\">\n                      {db.title || \"Untitled\"}\n                    </p>\n                    {db.description && (\n                      <p className=\"text-xs text-neutral-600 truncate\">\n                        {db.description}\n                      </p>\n                    )}\n                  </div>\n                  <span className=\"text-neutral-700 group-hover:text-neutral-500 transition-colors text-xs\">\n                    ‚Üó\n                  </span>\n                </a>\n              ))}\n            </div>\n          ) : null}\n\n          {/* Empty State */}\n          {pages.length === 0 && databases.length === 0 && !data.raw && (\n              <div className=\"py-12 text-center\">\n                <p className=\"text-sm text-neutral-500\">\n                  No results found. Try a different search.\n                </p>\n              </div>\n            )}\n\n          {/* Raw fallback */}\n          {data.raw && pages.length === 0 && databases.length === 0 && (\n              <pre className=\"bg-neutral-900 border border-neutral-800 rounded-xl p-4 text-xs text-neutral-400 overflow-x-auto max-h-80\">\n                {JSON.stringify(data.raw, null, 2)}\n              </pre>\n            )}\n        </div>\n      )}\n\n      {/* Empty initial state */}\n      {!loading && !data && !error && (\n        <div className=\"py-16 text-center\">\n          <div className=\"text-3xl mb-3 opacity-20\">‚åò</div>\n          <p className=\"text-sm text-neutral-600\">\n            Search or browse your Notion workspace\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport const NotionDataView = memo(NotionDataViewComponent);\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1118, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/ui/SuccessToast.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo, useEffect, useState } from \"react\";\r\n\r\ninterface SuccessToastProps {\r\n  message: string;\r\n  duration?: number;\r\n  onClose?: () => void;\r\n}\r\n\r\nfunction SuccessToastComponent({\r\n  message,\r\n  duration = 3000,\r\n  onClose,\r\n}: SuccessToastProps) {\r\n  const [visible, setVisible] = useState(true);\r\n  const [exiting, setExiting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fadeTimer = setTimeout(() => {\r\n      setExiting(true);\r\n    }, duration - 300);\r\n\r\n    const removeTimer = setTimeout(() => {\r\n      setVisible(false);\r\n      onClose?.();\r\n    }, duration);\r\n\r\n    return () => {\r\n      clearTimeout(fadeTimer);\r\n      clearTimeout(removeTimer);\r\n    };\r\n  }, [duration, onClose]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div\r\n      className={`fixed bottom-6 right-6 z-50 bg-white text-black px-5 py-3 rounded-xl shadow-2xl shadow-white/5 text-sm font-medium transition-all duration-300 ${\r\n        exiting ? \"opacity-0 translate-y-2\" : \"opacity-100 translate-y-0\"\r\n      }`}\r\n      role=\"status\"\r\n    >\r\n      <div className=\"flex items-center gap-2\">\r\n        <span className=\"text-black\">‚úì</span>\r\n        <span>{message}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const SuccessToast = memo(SuccessToastComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUA,SAAS,sBAAsB,EAC7B,OAAO,EACP,WAAW,IAAI,EACf,OAAO,EACW;IAClB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY,WAAW;YAC3B,WAAW;QACb,GAAG,WAAW;QAEd,MAAM,cAAc,WAAW;YAC7B,WAAW;YACX;QACF,GAAG;QAEH,OAAO;YACL,aAAa;YACb,aAAa;QACf;IACF,GAAG;QAAC;QAAU;KAAQ;IAEtB,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE,8OAAC;QACC,WAAW,CAAC,+IAA+I,EACzJ,UAAU,4BAA4B,6BACtC;QACF,MAAK;kBAEL,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAK,WAAU;8BAAa;;;;;;8BAC7B,8OAAC;8BAAM;;;;;;;;;;;;;;;;;AAIf;AAEO,MAAM,6BAAe,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 1185, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Image from \"next/image\";\nimport { useNotionConnection } from \"@/hooks/useNotionConnection\";\nimport { ConnectionStatus } from \"@/components/notion/ConnectionStatus\";\nimport { ConnectButton } from \"@/components/notion/ConnectButton\";\nimport { DisconnectButton } from \"@/components/notion/DisconnectButton\";\nimport { NotionDataView } from \"@/components/notion/NotionDataView\";\nimport { ErrorBanner } from \"@/components/ui/ErrorBanner\";\nimport { SuccessToast } from \"@/components/ui/SuccessToast\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const { state, workspaceName, connectedAt, error, refetch } = useNotionConnection();\n  const [toast, setToast] = useState<string | null>(null);\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const handleDisconnected = useCallback(() => {\n    setToast(\"Notion disconnected successfully\");\n    refetch();\n  }, [refetch]);\n\n  if (!mounted || state === \"loading\") {\n    return (\n      <main className=\"min-h-screen flex items-center justify-center bg-black\">\n        <LoadingSpinner size=\"lg\" label=\"Loading dashboard‚Ä¶\" />\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"min-h-screen bg-black text-white flex flex-col\">\n      {/* Toast Notification */}\n      {toast && (\n        <SuccessToast message={toast} onClose={() => setToast(null)} />\n      )}\n\n      {/* Modern Glass Header */}\n      <header className=\"sticky top-0 z-50 border-b border-white/5 bg-black/60 backdrop-blur-md\">\n        <div className=\"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between\">\n          <div\n            className=\"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity\"\n            onClick={() => router.push(\"/\")}\n          >\n            <div className=\"bg-white/10 p-1.5 rounded-lg border border-white/10\">\n              <Image src=\"/logo.png\" alt=\"Logo\" width={20} height={20} />\n            </div>\n            <span className=\"text-sm font-bold tracking-tight uppercase\">\n              Notion MCP\n            </span>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            <ConnectionStatus\n              state={state}\n              workspaceName={workspaceName}\n              connectedAt={connectedAt}\n            />\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content Area */}\n      <div className=\"flex-1 max-w-6xl w-full mx-auto px-6 py-10\">\n        \n        {/* Error Handling Section */}\n        <div className=\"space-y-4 mb-8\">\n          {state === \"reconnection_required\" && (\n            <ErrorBanner\n              code=\"reconnection_required\"\n              message=\"Your Notion connection has expired. Please reconnect to continue.\"\n              retryable\n              onRetry={() => router.push(\"/connect\")}\n            />\n          )}\n\n          {state === \"error\" && error && (\n            <ErrorBanner\n              code=\"internal_error\"\n              message={error}\n              retryable\n              onRetry={refetch}\n            />\n          )}\n        </div>\n\n        {/* Not Connected State - Tall Card Design */}\n        {(state === \"not_connected\" || state === \"reconnection_required\") && (\n          <div className=\"h-[60vh] flex items-center justify-center\">\n            <div className=\"w-full max-w-md bg-neutral-900/40 border border-neutral-800 rounded-[32px] p-12 text-center flex flex-col items-center\">\n              <div className=\"w-16 h-16 bg-neutral-800 rounded-2xl flex items-center justify-center mb-8 border border-neutral-700\">\n                <Image src=\"/notion.png\" alt=\"Notion\" width={32} height={32} className=\"opacity-50\" />\n              </div>\n              <h2 className=\"text-2xl font-bold mb-3\">\n                {state === \"reconnection_required\" ? \"Reconnect Workspace\" : \"Get Started\"}\n              </h2>\n              <p className=\"text-neutral-500 text-sm mb-10 leading-relaxed\">\n                {state === \"reconnection_required\"\n                  ? \"Your session has expired. Re-authenticate to keep using your workspace tools.\"\n                  : \"Connect your workspace to enable AI-powered search and data querying.\"}\n              </p>\n              <ConnectButton className=\"w-full py-4 rounded-xl\" />\n            </div>\n          </div>\n        )}\n\n        {/* Connected State - Dashboard Grid */}\n        {state === \"connected\" && (\n          <div className=\"flex flex-col gap-10 animate-in fade-in slide-in-from-bottom-4 duration-700\">\n            \n            {/* Dashboard Header Section */}\n            <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6 pb-2\">\n              <div>\n                <h2 className=\"text-3xl font-bold tracking-tight\">Your Workspace</h2>\n                <p className=\"text-neutral-400 mt-2 text-base\">\n                  Viewing data from <span className=\"text-white font-medium\">{workspaceName}</span>\n                </p>\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                <button \n                   onClick={() => refetch()}\n                   className=\"px-4 py-2 text-sm font-medium border border-neutral-800 rounded-xl hover:bg-neutral-900 transition\"\n                >\n                  Refresh Data\n                </button>\n                <DisconnectButton onDisconnected={handleDisconnected} />\n              </div>\n            </div>\n\n            {/* Main Data View Card */}\n            <div className=\"bg-[#0A0A0A] border border-neutral-800 rounded-[32px] overflow-hidden shadow-2xl\">\n              <div className=\"p-1\">\n                <NotionDataView />\n              </div>\n            </div>\n\n          </div>\n        )}\n      </div>\n\n      {/* Footer / Status Bar */}\n      <footer className=\"mt-auto py-6 border-t border-white/5 text-center\">\n        <p className=\"text-[10px] uppercase tracking-widest text-neutral-600 font-medium\">\n          Secure End-to-End Encryption Enabled\n        </p>\n      </footer>\n    </main>\n  );\n}"],"names":[],"mappings":"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"}}]
}