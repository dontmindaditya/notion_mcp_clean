{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/lib/api-client.ts"],"sourcesContent":["import type { ApiError, ApiErrorResponse, ApiResponse } from \"@/types/notion\";\r\n\r\nexport class ApiClientError extends Error {\r\n  public code: ApiError[\"code\"];\r\n  public retryable: boolean;\r\n\r\n  constructor(apiError: ApiError) {\r\n    super(apiError.message);\r\n    this.name = \"ApiClientError\";\r\n    this.code = apiError.code;\r\n    this.retryable = apiError.retryable;\r\n  }\r\n}\r\n\r\nasync function request<T>(\r\n  url: string,\r\n  options: RequestInit = {}\r\n): Promise<T> {\r\n  const res = await fetch(url, {\r\n    ...options,\r\n    credentials: \"include\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...options.headers,\r\n    },\r\n  });\r\n\r\n  // Handle non-JSON responses\r\n  const contentType = res.headers.get(\"content-type\");\r\n  if (!contentType?.includes(\"application/json\")) {\r\n    if (!res.ok) {\r\n      throw new ApiClientError({\r\n        code: \"internal_error\",\r\n        message: `Request failed with status ${res.status}`,\r\n        retryable: res.status >= 500,\r\n      });\r\n    }\r\n    return {} as T;\r\n  }\r\n\r\n  const body: ApiResponse<T> = await res.json();\r\n\r\n  if (\"error\" in body) {\r\n    throw new ApiClientError((body as ApiErrorResponse).error);\r\n  }\r\n\r\n  return (body as { data: T }).data;\r\n}\r\n\r\nexport const apiClient = {\r\n  get<T>(url: string): Promise<T> {\r\n    return request<T>(url, { method: \"GET\" });\r\n  },\r\n\r\n  post<T>(url: string, data?: unknown): Promise<T> {\r\n    return request<T>(url, {\r\n      method: \"POST\",\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  },\r\n};\r\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,uBAAuB;IAC3B,KAAuB;IACvB,UAAmB;IAE1B,YAAY,QAAkB,CAAE;QAC9B,KAAK,CAAC,SAAS,OAAO;QACtB,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,IAAI,GAAG,SAAS,IAAI;QACzB,IAAI,CAAC,SAAS,GAAG,SAAS,SAAS;IACrC;AACF;AAEA,eAAe,QACb,GAAW,EACX,UAAuB,CAAC,CAAC;IAEzB,MAAM,MAAM,MAAM,MAAM,KAAK;QAC3B,GAAG,OAAO;QACV,aAAa;QACb,SAAS;YACP,gBAAgB;YAChB,GAAG,QAAQ,OAAO;QACpB;IACF;IAEA,4BAA4B;IAC5B,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC;IACpC,IAAI,CAAC,aAAa,SAAS,qBAAqB;QAC9C,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,IAAI,eAAe;gBACvB,MAAM;gBACN,SAAS,CAAC,2BAA2B,EAAE,IAAI,MAAM,EAAE;gBACnD,WAAW,IAAI,MAAM,IAAI;YAC3B;QACF;QACA,OAAO,CAAC;IACV;IAEA,MAAM,OAAuB,MAAM,IAAI,IAAI;IAE3C,IAAI,WAAW,MAAM;QACnB,MAAM,IAAI,eAAe,AAAC,KAA0B,KAAK;IAC3D;IAEA,OAAO,AAAC,KAAqB,IAAI;AACnC;AAEO,MAAM,YAAY;IACvB,KAAO,GAAW;QAChB,OAAO,QAAW,KAAK;YAAE,QAAQ;QAAM;IACzC;IAEA,MAAQ,GAAW,EAAE,IAAc;QACjC,OAAO,QAAW,KAAK;YACrB,QAAQ;YACR,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;QACtC;IACF;AACF"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/hooks/useNotionConnection.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport { apiClient, ApiClientError } from \"@/lib/api-client\";\r\nimport type { ConnectionState, NotionConnectionStatus } from \"@/types/notion\";\r\n\r\ninterface UseNotionConnectionReturn {\r\n  state: ConnectionState;\r\n  workspaceName: string | null;\r\n  connectedAt: string | null;\r\n  error: string | null;\r\n  refetch: () => Promise<void>;\r\n}\r\n\r\nexport function useNotionConnection(): UseNotionConnectionReturn {\r\n  const [state, setState] = useState<ConnectionState>(\"loading\");\r\n  const [workspaceName, setWorkspaceName] = useState<string | null>(null);\r\n  const [connectedAt, setConnectedAt] = useState<string | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const mountedRef = useRef(true);\r\n\r\n  const fetchStatus = useCallback(async () => {\r\n    if (!mountedRef.current) return;\r\n    setState(\"loading\");\r\n    setError(null);\r\n\r\n    try {\r\n      const status = await apiClient.get<NotionConnectionStatus>(\"/notion/status\");\r\n\r\n      if (!mountedRef.current) return;\r\n\r\n      if (status.connected && status.status === \"active\") {\r\n        setState(\"connected\");\r\n        setWorkspaceName(status.workspace_name ?? null);\r\n        setConnectedAt(status.connected_at ?? null);\r\n      } else {\r\n        setState(\"not_connected\");\r\n        setWorkspaceName(null);\r\n        setConnectedAt(null);\r\n      }\r\n    } catch (err) {\r\n      if (!mountedRef.current) return;\r\n\r\n      if (err instanceof ApiClientError) {\r\n        if (err.code === \"reconnection_required\") {\r\n          setState(\"reconnection_required\");\r\n        } else {\r\n          setState(\"error\");\r\n        }\r\n        setError(err.message);\r\n      } else {\r\n        setState(\"error\");\r\n        setError(\"Failed to check connection status\");\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n    fetchStatus();\r\n    return () => {\r\n      mountedRef.current = false;\r\n    };\r\n  }, [fetchStatus]);\r\n\r\n  return { state, workspaceName, connectedAt, error, refetch: fetchStatus };\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAcO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAkB;IACpD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,iNAAQ,EAAgB;IAClE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB;IAC9D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,aAAa,IAAA,+MAAM,EAAC;IAE1B,MAAM,cAAc,IAAA,oNAAW,EAAC;QAC9B,IAAI,CAAC,WAAW,OAAO,EAAE;QACzB,SAAS;QACT,SAAS;QAET,IAAI;YACF,MAAM,SAAS,MAAM,gJAAS,CAAC,GAAG,CAAyB;YAE3D,IAAI,CAAC,WAAW,OAAO,EAAE;YAEzB,IAAI,OAAO,SAAS,IAAI,OAAO,MAAM,KAAK,UAAU;gBAClD,SAAS;gBACT,iBAAiB,OAAO,cAAc,IAAI;gBAC1C,eAAe,OAAO,YAAY,IAAI;YACxC,OAAO;gBACL,SAAS;gBACT,iBAAiB;gBACjB,eAAe;YACjB;QACF,EAAE,OAAO,KAAK;YACZ,IAAI,CAAC,WAAW,OAAO,EAAE;YAEzB,IAAI,eAAe,qJAAc,EAAE;gBACjC,IAAI,IAAI,IAAI,KAAK,yBAAyB;oBACxC,SAAS;gBACX,OAAO;oBACL,SAAS;gBACX;gBACA,SAAS,IAAI,OAAO;YACtB,OAAO;gBACL,SAAS;gBACT,SAAS;YACX;QACF;IACF,GAAG,EAAE;IAEL,IAAA,kNAAS,EAAC;QACR,WAAW,OAAO,GAAG;QACrB;QACA,OAAO;YACL,WAAW,OAAO,GAAG;QACvB;IACF,GAAG;QAAC;KAAY;IAEhB,OAAO;QAAE;QAAO;QAAe;QAAa;QAAO,SAAS;IAAY;AAC1E"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/ui/LoadingSpinner.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo } from \"react\";\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  label?: string;\r\n}\r\n\r\nfunction LoadingSpinnerComponent({ size = \"md\", label }: LoadingSpinnerProps) {\r\n  const sizeMap = {\r\n    sm: \"h-4 w-4 border-[2px]\",\r\n    md: \"h-6 w-6 border-[2px]\",\r\n    lg: \"h-10 w-10 border-[3px]\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center gap-3\">\r\n      <div\r\n        className={`${sizeMap[size]} rounded-full border-white/20 border-t-white animate-spin`}\r\n        role=\"status\"\r\n        aria-label={label ?? \"Loading\"}\r\n      />\r\n      {label && (\r\n        <p className=\"text-sm text-neutral-400 animate-pulse\">{label}</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const LoadingSpinner = memo(LoadingSpinnerComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASA,SAAS,wBAAwB,EAAE,OAAO,IAAI,EAAE,KAAK,EAAuB;IAC1E,MAAM,UAAU;QACd,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC,yDAAyD,CAAC;gBACtF,MAAK;gBACL,cAAY,SAAS;;;;;;YAEtB,uBACC,8OAAC;gBAAE,WAAU;0BAA0C;;;;;;;;;;;;AAI/D;AAEO,MAAM,+BAAiB,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/notion/ConnectButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo, useCallback, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { apiClient, ApiClientError } from \"@/lib/api-client\";\r\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\r\nimport type { ConnectResponse } from \"@/types/notion\";\r\n\r\ninterface ConnectButtonProps {\r\n  className?: string;\r\n  variant?: \"primary\" | \"compact\" | \"card\";\r\n}\r\n\r\nfunction ConnectButtonComponent({\r\n  className = \"\",\r\n  variant = \"primary\",\r\n}: ConnectButtonProps) {\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleConnect = useCallback(async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const { url } = await apiClient.post<ConnectResponse>(\r\n        \"/auth/notion/connect\"\r\n      );\r\n      // Full-page redirect to Notion OAuth\r\n      window.location.href = url;\r\n    } catch (err) {\r\n      setLoading(false);\r\n      if (err instanceof ApiClientError) {\r\n        setError(err.message);\r\n      } else {\r\n        setError(\"Failed to initiate connection\");\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  if (variant === \"compact\") {\r\n    return (\r\n      <button\r\n        onClick={handleConnect}\r\n        disabled={loading}\r\n        className={`inline-flex items-center gap-2 bg-white text-black font-medium text-sm px-4 py-2 rounded-lg hover:bg-neutral-200 transition-colors disabled:opacity-50 ${className}`}\r\n      >\r\n        {loading ? (\r\n          <LoadingSpinner size=\"sm\" />\r\n        ) : (\r\n          <Image src=\"/notion.png\" alt=\"\" width={16} height={16} />\r\n        )}\r\n        <span>Connect</span>\r\n      </button>\r\n    );\r\n  }\r\n\r\n  if (variant === \"card\") {\r\n    return (\r\n      <div className={`flex flex-col gap-3 ${className}`}>\r\n        <button\r\n          onClick={handleConnect}\r\n          disabled={loading}\r\n          className=\"w-full rounded-2xl bg-white text-black font-bold text-base py-5 hover:bg-neutral-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n        >\r\n          {loading ? \"Connecting...\" : \"Connect Notion\"}\r\n        </button>\r\n        {error && (\r\n          <p className=\"text-sm text-neutral-400 text-center\">{error}</p>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`flex flex-col items-center gap-4 ${className}`}>\r\n      <button\r\n        onClick={handleConnect}\r\n        disabled={loading}\r\n        className=\"group relative flex items-center gap-3 bg-white text-black font-semibold text-base px-8 py-4 rounded-2xl hover:bg-neutral-100 active:scale-[0.98] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-white/5\"\r\n      >\r\n        {loading ? (\r\n          <>\r\n            <div className=\"h-5 w-5 rounded-full border-2 border-black/20 border-t-black animate-spin\" />\r\n            <span>Connectingâ€¦</span>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Image\r\n              src=\"/notion.png\"\r\n              alt=\"Notion\"\r\n              width={20}\r\n              height={20}\r\n              className=\"group-hover:scale-110 transition-transform\"\r\n            />\r\n            <span>Connect Notion</span>\r\n          </>\r\n        )}\r\n      </button>\r\n\r\n      {error && (\r\n        <p className=\"text-sm text-neutral-400 text-center max-w-xs\">\r\n          {error}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const ConnectButton = memo(ConnectButtonComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAaA,SAAS,uBAAuB,EAC9B,YAAY,EAAE,EACd,UAAU,SAAS,EACA;IACnB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,WAAW;QACX,SAAS;QAET,IAAI;YACF,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,gJAAS,CAAC,IAAI,CAClC;YAEF,qCAAqC;YACrC,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB,EAAE,OAAO,KAAK;YACZ,WAAW;YACX,IAAI,eAAe,qJAAc,EAAE;gBACjC,SAAS,IAAI,OAAO;YACtB,OAAO;gBACL,SAAS;YACX;QACF;IACF,GAAG,EAAE;IAEL,IAAI,YAAY,WAAW;QACzB,qBACE,8OAAC;YACC,SAAS;YACT,UAAU;YACV,WAAW,CAAC,uJAAuJ,EAAE,WAAW;;gBAE/K,wBACC,8OAAC,oKAAc;oBAAC,MAAK;;;;;yCAErB,8OAAC,wIAAK;oBAAC,KAAI;oBAAc,KAAI;oBAAG,OAAO;oBAAI,QAAQ;;;;;;8BAErD,8OAAC;8BAAK;;;;;;;;;;;;IAGZ;IAEA,IAAI,YAAY,QAAQ;QACtB,qBACE,8OAAC;YAAI,WAAW,CAAC,oBAAoB,EAAE,WAAW;;8BAChD,8OAAC;oBACC,SAAS;oBACT,UAAU;oBACV,WAAU;8BAET,UAAU,kBAAkB;;;;;;gBAE9B,uBACC,8OAAC;oBAAE,WAAU;8BAAwC;;;;;;;;;;;;IAI7D;IAEA,qBACE,8OAAC;QAAI,WAAW,CAAC,iCAAiC,EAAE,WAAW;;0BAC7D,8OAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAU;0BAET,wBACC;;sCACE,8OAAC;4BAAI,WAAU;;;;;;sCACf,8OAAC;sCAAK;;;;;;;iDAGR;;sCACE,8OAAC,wIAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,WAAU;;;;;;sCAEZ,8OAAC;sCAAK;;;;;;;;;;;;;YAKX,uBACC,8OAAC;gBAAE,WAAU;0BACV;;;;;;;;;;;;AAKX;AAEO,MAAM,8BAAgB,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 372, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Image from \"next/image\";\nimport { useRouter } from \"next/navigation\";\nimport { useNotionConnection } from \"@/hooks/useNotionConnection\";\nimport { ConnectButton } from \"@/components/notion/ConnectButton\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\n\nexport default function HomePage() {\n  const router = useRouter();\n  const { state } = useNotionConnection();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted || state === \"loading\") {\n    return (\n      <main className=\"min-h-screen flex items-center justify-center bg-black text-white\">\n        <LoadingSpinner size=\"lg\" />\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"min-h-screen bg-black text-white flex flex-col p-6 md:p-10\">\n      \n      {/* Logo Header */}\n      <div className=\"flex items-center gap-2 text-xl font-semibold mb-8\">\n        <Image\n          src=\"/logo.png\"\n          alt=\"Logo\"\n          width={28}\n          height={28}\n          className=\"brightness-200\"\n        />\n        <span>Fairquanta</span>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex items-center justify-center\">\n        \n        {/* Card */}\n        <section className=\"w-full max-w-[440px] bg-neutral-900 border border-neutral-800 rounded-[40px] px-12 py-12 flex flex-col items-center shadow-2xl\">\n          \n          {/* Top Section */}\n          <div className=\"flex flex-col items-center w-full\">\n            \n            {/* Icon */}\n            <div className=\"w-20 h-20 bg-white rounded-2xl flex items-center justify-center mb-8 shadow-lg\">\n              <Image\n                src=\"/notion.png\"\n                alt=\"Notion\"\n                width={40}\n                height={40}\n                className=\"object-contain\"\n              />\n            </div>\n\n            {/* Heading */}\n            <h1 className=\"text-3xl font-bold text-center leading-tight mb-6\">\n              Connect your <br /> Notion workspace\n            </h1>\n\n            {/* Description */}\n            <p className=\"text-neutral-400 text-center text-sm leading-relaxed px-2 mb-12\">\n              Link your Notion account to search pages, query databases, and\n              interact with your workspace through MCP.\n            </p>\n          </div>\n\n          {/* Button Section */}\n          <div className=\"w-full max-w-[280px]\">\n            {state === \"connected\" ? (\n              <button\n                onClick={() => router.push(\"/dashboard\")}\n                className=\"w-full bg-white text-black font-bold py-5 rounded-2xl hover:bg-neutral-200 transition-all active:scale-[0.98]\"\n              >\n                Go to Dashboard\n              </button>\n            ) : (\n              <ConnectButton\n                variant=\"card\"\n                className=\"w-full\"\n              />\n            )}\n          </div>\n\n          {/* Footer */}\n          <p className=\"mt-auto pt-10 text-[11px] text-neutral-500 text-center leading-relaxed max-w-[300px]\">\n            Your credentials are encrypted and stored server-side. We never\n            access your Notion data without your permission.\n          </p>\n\n        </section>\n      </div>\n    </main>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,kKAAmB;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,WAAW;IACb,GAAG,EAAE;IAEL,IAAI,CAAC,WAAW,UAAU,WAAW;QACnC,qBACE,8OAAC;YAAK,WAAU;sBACd,cAAA,8OAAC,oKAAc;gBAAC,MAAK;;;;;;;;;;;IAG3B;IAEA,qBACE,8OAAC;QAAK,WAAU;;0BAGd,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,wIAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,WAAU;;;;;;kCAEZ,8OAAC;kCAAK;;;;;;;;;;;;0BAIR,8OAAC;gBAAI,WAAU;0BAGb,cAAA,8OAAC;oBAAQ,WAAU;;sCAGjB,8OAAC;4BAAI,WAAU;;8CAGb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,wIAAK;wCACJ,KAAI;wCACJ,KAAI;wCACJ,OAAO;wCACP,QAAQ;wCACR,WAAU;;;;;;;;;;;8CAKd,8OAAC;oCAAG,WAAU;;wCAAoD;sDACnD,8OAAC;;;;;wCAAK;;;;;;;8CAIrB,8OAAC;oCAAE,WAAU;8CAAkE;;;;;;;;;;;;sCAOjF,8OAAC;4BAAI,WAAU;sCACZ,UAAU,4BACT,8OAAC;gCACC,SAAS,IAAM,OAAO,IAAI,CAAC;gCAC3B,WAAU;0CACX;;;;;qDAID,8OAAC,sKAAa;gCACZ,SAAQ;gCACR,WAAU;;;;;;;;;;;sCAMhB,8OAAC;4BAAE,WAAU;sCAAuF;;;;;;;;;;;;;;;;;;;;;;;AAS9G"}}]
}