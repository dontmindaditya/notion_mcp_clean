{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/lib/api-client.ts"],"sourcesContent":["import type { ApiError, ApiErrorResponse, ApiResponse } from \"@/types/notion\";\r\n\r\nexport class ApiClientError extends Error {\r\n  public code: ApiError[\"code\"];\r\n  public retryable: boolean;\r\n\r\n  constructor(apiError: ApiError) {\r\n    super(apiError.message);\r\n    this.name = \"ApiClientError\";\r\n    this.code = apiError.code;\r\n    this.retryable = apiError.retryable;\r\n  }\r\n}\r\n\r\nasync function request<T>(\r\n  url: string,\r\n  options: RequestInit = {}\r\n): Promise<T> {\r\n  const res = await fetch(url, {\r\n    ...options,\r\n    credentials: \"include\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...options.headers,\r\n    },\r\n  });\r\n\r\n  // Handle non-JSON responses\r\n  const contentType = res.headers.get(\"content-type\");\r\n  if (!contentType?.includes(\"application/json\")) {\r\n    if (!res.ok) {\r\n      throw new ApiClientError({\r\n        code: \"internal_error\",\r\n        message: `Request failed with status ${res.status}`,\r\n        retryable: res.status >= 500,\r\n      });\r\n    }\r\n    return {} as T;\r\n  }\r\n\r\n  const body: ApiResponse<T> = await res.json();\r\n\r\n  if (\"error\" in body) {\r\n    throw new ApiClientError((body as ApiErrorResponse).error);\r\n  }\r\n\r\n  return (body as { data: T }).data;\r\n}\r\n\r\nexport const apiClient = {\r\n  get<T>(url: string): Promise<T> {\r\n    return request<T>(url, { method: \"GET\" });\r\n  },\r\n\r\n  post<T>(url: string, data?: unknown): Promise<T> {\r\n    return request<T>(url, {\r\n      method: \"POST\",\r\n      body: data ? JSON.stringify(data) : undefined,\r\n    });\r\n  },\r\n};\r\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,uBAAuB;IAC3B,KAAuB;IACvB,UAAmB;IAE1B,YAAY,QAAkB,CAAE;QAC9B,KAAK,CAAC,SAAS,OAAO;QACtB,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,IAAI,GAAG,SAAS,IAAI;QACzB,IAAI,CAAC,SAAS,GAAG,SAAS,SAAS;IACrC;AACF;AAEA,eAAe,QACb,GAAW,EACX,UAAuB,CAAC,CAAC;IAEzB,MAAM,MAAM,MAAM,MAAM,KAAK;QAC3B,GAAG,OAAO;QACV,aAAa;QACb,SAAS;YACP,gBAAgB;YAChB,GAAG,QAAQ,OAAO;QACpB;IACF;IAEA,4BAA4B;IAC5B,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC;IACpC,IAAI,CAAC,aAAa,SAAS,qBAAqB;QAC9C,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,IAAI,eAAe;gBACvB,MAAM;gBACN,SAAS,CAAC,2BAA2B,EAAE,IAAI,MAAM,EAAE;gBACnD,WAAW,IAAI,MAAM,IAAI;YAC3B;QACF;QACA,OAAO,CAAC;IACV;IAEA,MAAM,OAAuB,MAAM,IAAI,IAAI;IAE3C,IAAI,WAAW,MAAM;QACnB,MAAM,IAAI,eAAe,AAAC,KAA0B,KAAK;IAC3D;IAEA,OAAO,AAAC,KAAqB,IAAI;AACnC;AAEO,MAAM,YAAY;IACvB,KAAO,GAAW;QAChB,OAAO,QAAW,KAAK;YAAE,QAAQ;QAAM;IACzC;IAEA,MAAQ,GAAW,EAAE,IAAc;QACjC,OAAO,QAAW,KAAK;YACrB,QAAQ;YACR,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ;QACtC;IACF;AACF"}},
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/ui/LoadingSpinner.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo } from \"react\";\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: \"sm\" | \"md\" | \"lg\";\r\n  label?: string;\r\n}\r\n\r\nfunction LoadingSpinnerComponent({ size = \"md\", label }: LoadingSpinnerProps) {\r\n  const sizeMap = {\r\n    sm: \"h-4 w-4 border-[2px]\",\r\n    md: \"h-6 w-6 border-[2px]\",\r\n    lg: \"h-10 w-10 border-[3px]\",\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center gap-3\">\r\n      <div\r\n        className={`${sizeMap[size]} rounded-full border-white/20 border-t-white animate-spin`}\r\n        role=\"status\"\r\n        aria-label={label ?? \"Loading\"}\r\n      />\r\n      {label && (\r\n        <p className=\"text-sm text-neutral-400 animate-pulse\">{label}</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const LoadingSpinner = memo(LoadingSpinnerComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASA,SAAS,wBAAwB,EAAE,OAAO,IAAI,EAAE,KAAK,EAAuB;IAC1E,MAAM,UAAU;QACd,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,WAAW,GAAG,OAAO,CAAC,KAAK,CAAC,yDAAyD,CAAC;gBACtF,MAAK;gBACL,cAAY,SAAS;;;;;;YAEtB,uBACC,8OAAC;gBAAE,WAAU;0BAA0C;;;;;;;;;;;;AAI/D;AAEO,MAAM,+BAAiB,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/components/ui/ErrorBanner.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { memo, useCallback, useState } from \"react\";\r\nimport type { ErrorCode } from \"@/types/notion\";\r\n\r\ninterface ErrorBannerProps {\r\n  code: ErrorCode;\r\n  message: string;\r\n  retryable?: boolean;\r\n  onRetry?: () => void;\r\n  onDismiss?: () => void;\r\n}\r\n\r\nconst ERROR_CONFIG: Record<ErrorCode, { bg: string; icon: string }> = {\r\n  reconnection_required: { bg: \"bg-neutral-800 border-neutral-600\", icon: \"⚠\" },\r\n  notion_unavailable: { bg: \"bg-neutral-900 border-neutral-700\", icon: \"◌\" },\r\n  rate_limited: { bg: \"bg-neutral-900 border-neutral-700\", icon: \"◷\" },\r\n  internal_error: { bg: \"bg-neutral-900 border-neutral-600\", icon: \"✕\" },\r\n};\r\n\r\nfunction ErrorBannerComponent({\r\n  code,\r\n  message,\r\n  retryable,\r\n  onRetry,\r\n  onDismiss,\r\n}: ErrorBannerProps) {\r\n  const [dismissed, setDismissed] = useState(false);\r\n\r\n  const handleDismiss = useCallback(() => {\r\n    setDismissed(true);\r\n    onDismiss?.();\r\n  }, [onDismiss]);\r\n\r\n  if (dismissed) return null;\r\n\r\n  const config = ERROR_CONFIG[code] ?? ERROR_CONFIG.internal_error;\r\n\r\n  return (\r\n    <div\r\n      className={`${config.bg} border rounded-xl px-4 py-3 flex items-center justify-between gap-3 transition-all duration-300`}\r\n      role=\"alert\"\r\n    >\r\n      <div className=\"flex items-center gap-3 min-w-0\">\r\n        <span className=\"text-lg shrink-0\">{config.icon}</span>\r\n        <p className=\"text-sm text-neutral-300 truncate\">{message}</p>\r\n      </div>\r\n      <div className=\"flex items-center gap-2 shrink-0\">\r\n        {retryable && onRetry && (\r\n          <button\r\n            onClick={onRetry}\r\n            className=\"text-xs font-medium text-white bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-lg transition-colors\"\r\n          >\r\n            Retry\r\n          </button>\r\n        )}\r\n        <button\r\n          onClick={handleDismiss}\r\n          className=\"text-neutral-500 hover:text-neutral-300 transition-colors p-1\"\r\n          aria-label=\"Dismiss\"\r\n        >\r\n          ✕\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport const ErrorBanner = memo(ErrorBannerComponent);\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAaA,MAAM,eAAgE;IACpE,uBAAuB;QAAE,IAAI;QAAqC,MAAM;IAAI;IAC5E,oBAAoB;QAAE,IAAI;QAAqC,MAAM;IAAI;IACzE,cAAc;QAAE,IAAI;QAAqC,MAAM;IAAI;IACnE,gBAAgB;QAAE,IAAI;QAAqC,MAAM;IAAI;AACvE;AAEA,SAAS,qBAAqB,EAC5B,IAAI,EACJ,OAAO,EACP,SAAS,EACT,OAAO,EACP,SAAS,EACQ;IACjB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,aAAa;QACb;IACF,GAAG;QAAC;KAAU;IAEd,IAAI,WAAW,OAAO;IAEtB,MAAM,SAAS,YAAY,CAAC,KAAK,IAAI,aAAa,cAAc;IAEhE,qBACE,8OAAC;QACC,WAAW,GAAG,OAAO,EAAE,CAAC,gGAAgG,CAAC;QACzH,MAAK;;0BAEL,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAoB,OAAO,IAAI;;;;;;kCAC/C,8OAAC;wBAAE,WAAU;kCAAqC;;;;;;;;;;;;0BAEpD,8OAAC;gBAAI,WAAU;;oBACZ,aAAa,yBACZ,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;kCAIH,8OAAC;wBACC,SAAS;wBACT,WAAU;wBACV,cAAW;kCACZ;;;;;;;;;;;;;;;;;;AAMT;AAEO,MAAM,4BAAc,IAAA,6MAAI,EAAC"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/app/connect/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { apiClient, ApiClientError } from \"@/lib/api-client\";\nimport { LoadingSpinner } from \"@/components/ui/LoadingSpinner\";\nimport { ErrorBanner } from \"@/components/ui/ErrorBanner\";\nimport type { ConnectResponse } from \"@/types/notion\";\n\nexport default function ConnectPage() {\n  const [error, setError] = useState<string | null>(null);\n  const initiated = useRef(false);\n\n  useEffect(() => {\n    if (initiated.current) return;\n    initiated.current = true;\n\n    (async () => {\n      try {\n        const { url } = await apiClient.post<ConnectResponse>(\n          \"/auth/notion/connect\"\n        );\n        window.location.href = url;\n      } catch (err) {\n        if (err instanceof ApiClientError) {\n          setError(err.message);\n        } else {\n          setError(\"Failed to start the connection flow. Please try again.\");\n        }\n      }\n    })();\n  }, []);\n\n  return (\n    <main className=\"min-h-screen flex items-center justify-center px-6\">\n      <div className=\"max-w-sm w-full flex flex-col items-center gap-6\">\n        {error ? (\n          <>\n            <ErrorBanner\n              code=\"internal_error\"\n              message={error}\n              retryable\n              onRetry={() => window.location.reload()}\n            />\n\n            {/* ✅ FIXED */}\n            <a\n              href=\"/\"\n              className=\"text-sm text-neutral-500 hover:text-white transition-colors\"\n            >\n              ← Back to home\n            </a>\n          </>\n        ) : (\n          <>\n            <LoadingSpinner size=\"lg\" label=\"Redirecting to Notion…\" />\n            <p className=\"text-xs text-neutral-600 text-center\">\n              You'll be asked to authorize access to your workspace.\n            </p>\n          </>\n        )}\n      </div>\n    </main>\n  );\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAQe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,YAAY,IAAA,+MAAM,EAAC;IAEzB,IAAA,kNAAS,EAAC;QACR,IAAI,UAAU,OAAO,EAAE;QACvB,UAAU,OAAO,GAAG;QAEpB,CAAC;YACC,IAAI;gBACF,MAAM,EAAE,GAAG,EAAE,GAAG,MAAM,gJAAS,CAAC,IAAI,CAClC;gBAEF,OAAO,QAAQ,CAAC,IAAI,GAAG;YACzB,EAAE,OAAO,KAAK;gBACZ,IAAI,eAAe,qJAAc,EAAE;oBACjC,SAAS,IAAI,OAAO;gBACtB,OAAO;oBACL,SAAS;gBACX;YACF;QACF,CAAC;IACH,GAAG,EAAE;IAEL,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;sBACZ,sBACC;;kCACE,8OAAC,8JAAW;wBACV,MAAK;wBACL,SAAS;wBACT,SAAS;wBACT,SAAS,IAAM,OAAO,QAAQ,CAAC,MAAM;;;;;;kCAIvC,8OAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;6CAKH;;kCACE,8OAAC,oKAAc;wBAAC,MAAK;wBAAK,OAAM;;;;;;kCAChC,8OAAC;wBAAE,WAAU;kCAAuC;;;;;;;;;;;;;;;;;;AAQhE"}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 337, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 342, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}