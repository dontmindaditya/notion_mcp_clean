{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/notion/notion_connector/apps/web/app/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useCallback, useState, useEffect } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport Image from \"next/image\";\nimport { useNotionConnection } from \"@/apps/web/hooks/useNotionConnection\";\nimport { ConnectionStatus } from \"@/apps/web/components/notion/ConnectionStatus\";\nimport { ConnectButton } from \"@/apps/web/components/notion/ConnectButton\";\nimport { DisconnectButton } from \"@/apps/web/components/notion/DisconnectButton\";\nimport { NotionDataView } from \"@/apps/web/components/notion/NotionDataView\";\nimport { ErrorBanner } from \"@/apps/web/components/ui/ErrorBanner\";\nimport { SuccessToast } from \"@/apps/web/components/ui/SuccessToast\";\nimport { LoadingSpinner } from \"@/apps/web/components/ui/LoadingSpinner\";\n\nexport default function DashboardPage() {\n  const router = useRouter();\n  const { state, workspaceName, connectedAt, error, refetch } = useNotionConnection();\n  const [toast, setToast] = useState<string | null>(null);\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  const handleDisconnected = useCallback(() => {\n    setToast(\"Notion disconnected successfully\");\n    refetch();\n  }, [refetch]);\n\n  if (!mounted || state === \"loading\") {\n    return (\n      <main className=\"min-h-screen flex items-center justify-center bg-black\">\n        <LoadingSpinner size=\"lg\" label=\"Loading dashboardâ€¦\" />\n      </main>\n    );\n  }\n\n  return (\n    <main className=\"min-h-screen bg-black text-white flex flex-col\">\n      {/* Toast Notification */}\n      {toast && (\n        <SuccessToast message={toast} onClose={() => setToast(null)} />\n      )}\n\n      {/* Modern Glass Header */}\n      <header className=\"sticky top-0 z-50 border-b border-white/5 bg-black/60 backdrop-blur-md\">\n        <div className=\"max-w-6xl mx-auto px-6 h-16 flex items-center justify-between\">\n          <div\n            className=\"flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity\"\n            onClick={() => router.push(\"/\")}\n          >\n            <div className=\"bg-white/10 p-1.5 rounded-lg border border-white/10\">\n              <Image src=\"/logo.png\" alt=\"Logo\" width={20} height={20} />\n            </div>\n            <span className=\"text-sm font-bold tracking-tight uppercase\">\n              Notion MCP\n            </span>\n          </div>\n\n          <div className=\"flex items-center gap-4\">\n            <ConnectionStatus\n              state={state}\n              workspaceName={workspaceName}\n              connectedAt={connectedAt}\n            />\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content Area */}\n      <div className=\"flex-1 max-w-6xl w-full mx-auto px-6 py-10\">\n        \n        {/* Error Handling Section */}\n        <div className=\"space-y-4 mb-8\">\n          {state === \"reconnection_required\" && (\n            <ErrorBanner\n              code=\"reconnection_required\"\n              message=\"Your Notion connection has expired. Please reconnect to continue.\"\n              retryable\n              onRetry={() => router.push(\"/connect\")}\n            />\n          )}\n\n          {state === \"error\" && error && (\n            <ErrorBanner\n              code=\"internal_error\"\n              message={error}\n              retryable\n              onRetry={refetch}\n            />\n          )}\n        </div>\n\n        {/* Not Connected State - Tall Card Design */}\n        {(state === \"not_connected\" || state === \"reconnection_required\") && (\n          <div className=\"h-[60vh] flex items-center justify-center\">\n            <div className=\"w-full max-w-md bg-neutral-900/40 border border-neutral-800 rounded-[32px] p-12 text-center flex flex-col items-center\">\n              <div className=\"w-16 h-16 bg-neutral-800 rounded-2xl flex items-center justify-center mb-8 border border-neutral-700\">\n                <Image src=\"/notion.png\" alt=\"Notion\" width={32} height={32} className=\"opacity-50\" />\n              </div>\n              <h2 className=\"text-2xl font-bold mb-3\">\n                {state === \"reconnection_required\" ? \"Reconnect Workspace\" : \"Get Started\"}\n              </h2>\n              <p className=\"text-neutral-500 text-sm mb-10 leading-relaxed\">\n                {state === \"reconnection_required\"\n                  ? \"Your session has expired. Re-authenticate to keep using your workspace tools.\"\n                  : \"Connect your workspace to enable AI-powered search and data querying.\"}\n              </p>\n              <ConnectButton className=\"w-full py-4 rounded-xl\" />\n            </div>\n          </div>\n        )}\n\n        {/* Connected State - Dashboard Grid */}\n        {state === \"connected\" && (\n          <div className=\"flex flex-col gap-10 animate-in fade-in slide-in-from-bottom-4 duration-700\">\n            \n            {/* Dashboard Header Section */}\n            <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6 pb-2\">\n              <div>\n                <h2 className=\"text-3xl font-bold tracking-tight\">Your Workspace</h2>\n                <p className=\"text-neutral-400 mt-2 text-base\">\n                  Viewing data from <span className=\"text-white font-medium\">{workspaceName}</span>\n                </p>\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                <button \n                   onClick={() => refetch()}\n                   className=\"px-4 py-2 text-sm font-medium border border-neutral-800 rounded-xl hover:bg-neutral-900 transition\"\n                >\n                  Refresh Data\n                </button>\n                <DisconnectButton onDisconnected={handleDisconnected} />\n              </div>\n            </div>\n\n            {/* Main Data View Card */}\n            <div className=\"bg-[#0A0A0A] border border-neutral-800 rounded-[32px] overflow-hidden shadow-2xl\">\n              <div className=\"p-1\">\n                <NotionDataView />\n              </div>\n            </div>\n\n          </div>\n        )}\n      </div>\n\n      {/* Footer / Status Bar */}\n      <footer className=\"mt-auto py-6 border-t border-white/5 text-center\">\n        <p className=\"text-[10px] uppercase tracking-widest text-neutral-600 font-medium\">\n          Secure End-to-End Encryption Enabled\n        </p>\n      </footer>\n    </main>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAJA;;;;;;;;;;;;;AAce,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,WAAW,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IAC9D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,WAAW;IACb,GAAG,EAAE;IAEL,MAAM,qBAAqB,IAAA,oNAAW,EAAC;QACrC,SAAS;QACT;IACF,GAAG;QAAC;KAAQ;IAEZ,IAAI,CAAC,WAAW,UAAU,WAAW;QACnC,qBACE,8OAAC;YAAK,WAAU;sBACd,cAAA,8OAAC;gBAAe,MAAK;gBAAK,OAAM;;;;;;;;;;;IAGtC;IAEA,qBACE,8OAAC;QAAK,WAAU;;YAEb,uBACC,8OAAC;gBAAa,SAAS;gBAAO,SAAS,IAAM,SAAS;;;;;;0BAIxD,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,WAAU;4BACV,SAAS,IAAM,OAAO,IAAI,CAAC;;8CAE3B,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,wIAAK;wCAAC,KAAI;wCAAY,KAAI;wCAAO,OAAO;wCAAI,QAAQ;;;;;;;;;;;8CAEvD,8OAAC;oCAAK,WAAU;8CAA6C;;;;;;;;;;;;sCAK/D,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCACC,OAAO;gCACP,eAAe;gCACf,aAAa;;;;;;;;;;;;;;;;;;;;;;0BAOrB,8OAAC;gBAAI,WAAU;;kCAGb,8OAAC;wBAAI,WAAU;;4BACZ,UAAU,yCACT,8OAAC;gCACC,MAAK;gCACL,SAAQ;gCACR,SAAS;gCACT,SAAS,IAAM,OAAO,IAAI,CAAC;;;;;;4BAI9B,UAAU,WAAW,uBACpB,8OAAC;gCACC,MAAK;gCACL,SAAS;gCACT,SAAS;gCACT,SAAS;;;;;;;;;;;;oBAMd,CAAC,UAAU,mBAAmB,UAAU,uBAAuB,mBAC9D,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC,wIAAK;wCAAC,KAAI;wCAAc,KAAI;wCAAS,OAAO;wCAAI,QAAQ;wCAAI,WAAU;;;;;;;;;;;8CAEzE,8OAAC;oCAAG,WAAU;8CACX,UAAU,0BAA0B,wBAAwB;;;;;;8CAE/D,8OAAC;oCAAE,WAAU;8CACV,UAAU,0BACP,kFACA;;;;;;8CAEN,8OAAC;oCAAc,WAAU;;;;;;;;;;;;;;;;;oBAM9B,UAAU,6BACT,8OAAC;wBAAI,WAAU;;0CAGb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAoC;;;;;;0DAClD,8OAAC;gDAAE,WAAU;;oDAAkC;kEAC3B,8OAAC;wDAAK,WAAU;kEAA0B;;;;;;;;;;;;;;;;;;kDAIhE,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDACE,SAAS,IAAM;gDACf,WAAU;0DACZ;;;;;;0DAGD,8OAAC;gDAAiB,gBAAgB;;;;;;;;;;;;;;;;;;0CAKtC,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;0BASX,8OAAC;gBAAO,WAAU;0BAChB,cAAA,8OAAC;oBAAE,WAAU;8BAAqE;;;;;;;;;;;;;;;;;AAM1F"}}]
}